<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 리스트</title>
</head>
<body>
<h1>공지사항</h1>
    <table border="1" cellpadding="1" cellspacing="1">
        <ul>
            <tr>
                <td>번호</td>
                <td>제목</td>
                <td>작성자</td>
                <td>날짜</td>
                <td>조회수</td>
            </tr>
            {{#selectListNotice}}
                <tr>
                    <td>{{notice_id}}</td>
                    <td><a href="/cs/selectnotice/{{notice_id}}">{{notice_title}}</a></td>
                    <td>{{notice_writer}}</td>
                    <td>{{notice_date}}</td>
                    <td>{{notice_cnt}}</td>
                </tr>
            {{/selectListNotice}}
        </ul>
    </table>


<!--이전 버튼-->
{{#paging}}
    {{#hasPre}}
        <a href="/cs/notice?page={{prePage}}">이전</a>
    {{/hasPre}}
{{/paging}}

<!-- 페이지 번호를 반복문으로 생성 -->
{{#pagelist}}
    <!--현재페이지는 링크가 없고 강조표시-->
    {{#currentPageFlag}}
        <strong>{{currentPage}}</strong>
    {{/currentPageFlag}}
    <!--현재 페이지가 아닌 숫자들은 해당페이지로 이동하는 링크생성-->
    {{^currentPageFlag}}
        <a href="{{test}}{{currentPage}}">{{currentPage}}</a>
    {{/currentPageFlag}}
{{/pagelist}}

<!--다음페이지 버튼-->
{{#paging}}
    {{#hasNext}}
        <a href="/cs/notice?page={{nextPage}}">다음</a>
    {{/hasNext}}
{{/paging}}


<br/>
<form action="/cs/notice" method="GET">
<select id="searchType" name="searchType">
    <option value="">전체</option>
    <option value="title">제목</option>
    <option value="writer">작성자</option>
    <!-- 필요한 항목 추가 -->
</select>
<input type="text" id="search" name="search" placeholder="검색">

    <input type="button" value="검색" onclick="submitForm()">

</form>


<br/>
<a href="/cs/insertnotice-view" role="button">글 작성</a>
<a href="/cs/notice">목록</a>

<script>
    // search 할때, 기본 URL 주소값을 변경하기 위해..
    function submitForm() {
        //  위의 select의 name인 서치타입을 가져오고 해당 입력값을 가져옴
        var searchTypeSelect = document.getElementById("searchType");
        var selectedSearchType = searchTypeSelect.value;

        //인풋 값을 컨텐츠에 담음
        var search = document.getElementById("search").value;


        // 프로젝트Id 로 검색 또는 입력값이 없을때
        if (selectedSearchType === "title" && search !== "") {  // 검색시, projectId와 빈칸일때
            // URL 주소를 아래로 변경해라 (베이스URL / 서치 URL)
            var baseUrl = "/cs/notice";
            var searchUrl = baseUrl + "?title=" + search;

            //  searchUrl로 이동
            window.location.href = searchUrl;
        }

        if (selectedSearchType === "writer" && search !== "") {
            // Construct the URL
            var baseUrl = "/cs/notice";
            var searchUrl = baseUrl + "?writer=" + search;


            window.location.href = searchUrl;
        }
    }
</script>


</body>
</html>